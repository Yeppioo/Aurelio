<UserControl
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d"
    x:Class="Aurelio.Views.Main.Pages.Viewers.PluginInfo"
    x:DataType="viewers:PluginInfo"
    xmlns="https://github.com/avaloniaui"
    xmlns:base="clr-namespace:Aurelio.Plugin.Base;assembly=Aurelio.Plugin.Base"
    xmlns:converter="clr-namespace:Aurelio.Public.Module.Converter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:properties="clr-namespace:Aurelio.Public.Langs"
    xmlns:u="https://irihi.tech/ursa"
    xmlns:viewModels="clr-namespace:Aurelio.Views.Main.Pages"
    xmlns:viewers="clr-namespace:Aurelio.Views.Main.Pages.Viewers"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <UserControl.Resources>
        <converter:RequirePluginVersionToStringConverter x:Key="RequirePluginVersionToStringConverter" />
        <converter:EnumIndexToBoolConverter x:Key="EnumIndexToBoolConverter" />
        <converter:BoolReversalConverter x:Key="BoolReversalConverter" />
    </UserControl.Resources>
    <Border Name="Root">
        <DockPanel>
            <Border
                Background="{DynamicResource CardBackgroundColor}"
                CornerRadius="{DynamicResource CardCornerRadius}"
                DockPanel.Dock="Top"
                Margin="15,5,15,10"
                Padding="0,0,0,5"
                VerticalAlignment="Top">
                <DockPanel>
                    <StackPanel
                        DockPanel.Dock="Right"
                        Margin="0,0,15,0"
                        Orientation="Horizontal"
                        Spacing="10"
                        VerticalAlignment="Center">
                        <!--  删除按钮  -->
                        <u:IconButton
                            Classes="danger"
                            Click="OnDeleteButtonClick"
                            Content="{Binding Source={x:Static properties:MainLangProvider.Current}, Path=Resources.Delete}"
                            Name="DeleteButton"
                            VerticalAlignment="Center">
                            <u:IconButton.Icon>
                                <PathIcon
                                    Data="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"
                                    Height="13"
                                    HorizontalAlignment="Center"
                                    Margin="0,-1,1,0"
                                    VerticalAlignment="Center"
                                    Width="14" />
                            </u:IconButton.Icon>
                        </u:IconButton>
                        <!--  更新按钮  -->
                        <u:IconButton
                            Classes="accent"
                            Command="{Binding Plugin.UpdateNugetPackage}"
                            CommandParameter="{Binding $self}"
                            Content="{Binding Source={x:Static properties:MainLangProvider.Current}, Path=Resources.Update}"
                            DockPanel.Dock="Left"
                            IsVisible="{Binding Plugin.HasUpdate}"
                            VerticalAlignment="Center">
                            <u:IconButton.Icon>
                                <PathIcon
                                    Data="F1 M 4.6875 14.29245 L 7.5 14.29245 L 7.5 19.295959 C 7.5 19.986877 8.059692 20.546875 8.75 20.546875 L 11.25 20.546875 C 11.940384 20.546875 12.5 19.986877 12.5 19.295959 L 12.5 14.29245 L 15.3125 14.29245 C 15.686646 14.29245 16.025391 14.069443 16.173706 13.725586 C 16.321411 13.381729 16.251221 12.982254 15.994263 12.709885 L 10.681763 7.080841 C 10.327759 6.70578 9.672241 6.70578 9.318237 7.080841 L 4.005737 12.709885 C 3.748779 12.982254 3.678589 13.381729 3.826294 13.725586 C 3.974609 14.069443 4.313354 14.29245 4.6875 14.29245 Z M 16.25 3.046875 L 3.75 3.046875 C 3.059654 3.046875 2.5 3.606529 2.5 4.296875 L 2.5 4.296875 C 2.5 4.987221 3.059654 5.546875 3.75 5.546875 L 16.25 5.546875 C 16.940346 5.546875 17.5 4.987221 17.5 4.296875 L 17.5 4.296875 C 17.5 3.606529 16.940346 3.046875 16.25 3.046875 Z "
                                    Height="13"
                                    HorizontalAlignment="Center"
                                    Margin="0,-1,1,0"
                                    VerticalAlignment="Center"
                                    Width="14" />
                            </u:IconButton.Icon>
                        </u:IconButton>
                    </StackPanel>
                    <StackPanel Margin="14,7,15,3">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock FontSize="18" Text="{Binding Plugin.Plugin.Name}" />
                            <TextBlock
                                FontSize="14"
                                Margin="10,0,0,0"
                                Text="v"
                                VerticalAlignment="Bottom" />
                            <TextBlock
                                FontSize="14"
                                Text="{Binding Plugin.Plugin.Version}"
                                VerticalAlignment="Bottom" />
                            <TextBlock
                                FontSize="14"
                                Margin="10,0,0,0"
                                Text="by "
                                VerticalAlignment="Bottom" />
                            <TextBlock
                                FontSize="14"
                                Text="{Binding Plugin.Plugin.Author}"
                                VerticalAlignment="Bottom" />
                            <TextBlock
                                FontSize="14"
                                Margin="10,0,0,0"
                                Text="("
                                VerticalAlignment="Bottom" />
                            <TextBlock
                                FontSize="14"
                                Text="{Binding Plugin.Plugin.Id}"
                                VerticalAlignment="Bottom" />
                            <TextBlock
                                FontSize="14"
                                Text=")"
                                VerticalAlignment="Bottom" />
                        </StackPanel>
                        <SelectableTextBlock
                            FontSize="14"
                            Margin="0,3,0,0"
                            Text="{Binding Plugin.Plugin.Description}"
                            TextWrapping="Wrap"
                            VerticalAlignment="Bottom" />
                        <TextBlock
                            FontSize="14"
                            IsVisible="False"
                            Margin="0,8,0,0"
                            Text="Requires: "
                            TextWrapping="Wrap"
                            VerticalAlignment="Bottom" />
                        <Border
                            Background="{DynamicResource 2xCardBackgroundColor}"
                            ClipToBounds="true"
                            CornerRadius="{DynamicResource CardCornerRadius}"
                            IsVisible="{Binding Plugin.HasDependencies}"
                            Margin="-5,10,-5,2">
                            <Expander Header="Requires">
                                <ItemsControl ItemsSource="{Binding Plugin.Plugin.Require}" Margin="10">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate DataType="base:RequirePluginEntry">
                                            <Grid Margin="0,0,0,0">
                                                <TextBlock Margin="2,0,0,0" Text="•" />
                                                <TextBlock Margin="20,00,0,0">
                                                    <Run Text="{Binding Id}" />
                                                    <Run Text="{Binding ., Converter={StaticResource RequirePluginVersionToStringConverter}}" />
                                                </TextBlock>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </Expander>
                        </Border>
                    </StackPanel>
                </DockPanel>
            </Border>
            <ContentControl Content="{Binding Plugin.Plugin.SettingPage}" />
        </DockPanel>
    </Border>
</UserControl>